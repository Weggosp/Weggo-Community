{% extends 'bases/weggo_v1_panel.html' %}

<!-- LOADNG JQUERY SCRIPTS -->
<link href="https://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" rel="Stylesheet">
</link>
<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

{% block css %}
{% endblock %}

{% block content %}
<!-- MESSAGES -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<section id="messages" class="container">
  <div class="alert alert-{{category}} alert-dismissible fade show" role="alert">
    {{message}} {{email}}
    <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
</section>
{% endfor %}
{% endif %}
{% endwith %}

<style>
.quill-custom {
position: relative;
}
.quill-custom .ql-container {
position: static;
}
.quill-custom .ql-container.ql-snow,
.quill-custom .ql-toolbar.ql-snow {
border-color: #e7eaf3;
}
.quill-custom .ql-toolbar.ql-snow {
padding: 0.75rem 1.3125rem;
border-top-left-radius: 0.3125rem;
border-top-right-radius: 0.3125rem;
}
.quill-custom .ql-container.ql-snow {
border-bottom-right-radius: 0.3125rem;
border-bottom-left-radius: 0.3125rem;
}
.quill-custom.ql-toolbar-bottom .ql-toolbar.ql-snow {
border-top-left-radius: 0;
border-top-right-radius: 0;
border-bottom-right-radius: 0.3125rem;
border-bottom-left-radius: 0.3125rem;
}
.quill-custom.ql-toolbar-bottom .ql-toolbar.ql-snow + .ql-container.ql-snow {
border-top-left-radius: 0.3125rem;
border-top-right-radius: 0.3125rem;
border: 0.0625rem solid #e7eaf3;
}
.quill-custom .ql-toolbar-list {
line-height: normal;
margin-bottom: 0;
}
.quill-custom .ql-formats:first-child {
padding-left: 0;
}
.quill-custom .ql-formats:first-child button {
margin-right: 0.5rem;
}
.quill-custom .ql-formats:first-child button:first-child {
margin-left: -0.25rem;
}
.quill-custom .ql-editor {
position: relative;
min-height: 10rem;
padding: 1.3125rem 1.3125rem;
}
.quill-custom .ql-editor p {
font-size: 1rem;
font-family: "Open Sans", sans-serif;
color: #1e2022;
}
.quill-custom .ql-editor-content {
min-height: 10rem;
}
.quill-custom .ql-editor.ql-blank::before {
left: 1.3125rem;
color: #97a4af;
font-family: "Open Sans", sans-serif;
font-style: normal;
}
.quill-custom .ql-snow a.btn-primary {
color: #fff;
}
.quill-custom .ql-snow.ql-toolbar .ql-fill {
fill: #677788;
}
.quill-custom .ql-snow.ql-toolbar .ql-stroke {
stroke: #677788;
}
.quill-custom .ql-snow.ql-toolbar button:hover {
color: #76e8b8;
}
.quill-custom .ql-snow .ql-toolbar button,
.quill-custom .ql-snow.ql-toolbar button {
width: 1.75rem;
height: 1.75rem;
padding: 0.25rem 0.25rem;
}
.quill-custom .ql-snow .ql-tooltip {
position: fixed;
top: 50% !important;
left: 50% !important;
z-index: 1;
min-width: 20rem;
border-width: 0;
text-align: center;
box-shadow: 0 10px 40px 10px rgba(140, 152, 164, 0.175);
padding: 1.5rem 1.5rem;
border-radius: 0.3125rem;
-webkit-transform: translate(-50%, -50%);
transform: translate(-50%, -50%);
}
.quill-custom .ql-snow .ql-tooltip::before {
display: block;
text-align: center;
font-family: "Open Sans", sans-serif;
font-weight: 600;
font-size: 1rem;
border-bottom: 0.0625rem solid #e7eaf3;
padding-bottom: 1rem;
margin-bottom: 1.5rem;
margin-right: 0;
}
.quill-custom .ql-snow .ql-tooltip.ql-editing a.ql-preview,
.quill-custom .ql-snow .ql-tooltip.ql-editing a.ql-remove {
display: none;
}
.quill-custom .ql-snow .ql-tooltip a.ql-preview,
.quill-custom .ql-snow .ql-tooltip.ql-editing input[type="text"] {
min-width: 20rem;
font-size: 1rem;
line-height: normal;
border: 0.0625rem solid #e7eaf3;
padding: 0.875rem 1.09375rem;
margin-bottom: 1.5rem;
border-radius: 0.3125rem;
transition: 0.3s;
}
.quill-custom .ql-snow .ql-tooltip a.ql-preview {
display: block;
}
.quill-custom .ql-snow .ql-tooltip a.ql-preview:hover {
border-color: #76e8b8;
}
.quill-custom .ql-snow .ql-tooltip.ql-editing input[type="text"] {
height: auto;
display: block;
font-family: "Open Sans", sans-serif;
}
.quill-custom .ql-snow .ql-tooltip.ql-editing input[type="text"]:focus {
border-color: rgba(14, 14, 14, 0.4);
box-shadow: 0 0 10px rgba(14, 14, 14, 0.1);
}
.quill-custom .ql-snow .ql-action {
display: inline-block;
color: #fff;
background-color: #76e8b8;
font-size: 0.875rem;
line-height: normal;
padding: 0.875rem 1.09375rem;
border-radius: 0.3125rem;
transition: 0.3s;
}
.quill-custom .ql-snow .ql-action:hover {
background-color: #1366ff;
}
.quill-custom .ql-snow .ql-tooltip a.ql-action::after,
.quill-custom .ql-snow .ql-tooltip a.ql-remove::before {
padding-right: 0;
margin-left: 0;
border-right: none;
}
.quill-custom .ql-snow .ql-tooltip a.ql-remove {
border: 0.0625rem solid #e7eaf3;
font-size: 0.875rem;
padding: 0.875rem 1.09375rem;
border-radius: 0.3125rem;
margin-left: 0.5rem;
transition: 0.3s;
}
.quill-custom .ql-snow .ql-tooltip a.ql-remove:hover {
color: #76e8b8;
box-shadow: 0 3px 6px -2px rgba(140, 152, 164, 0.25);
}
</style>

<section id="weggo-news">
    <div class="container mb-0">
        <form id="newForm" class="needs-validation" action="{{url_for('auth.new_create')}}" method="POST" enctype="multipart/form-data">
            <div class="row">
                <div class="col-7 col-md-8">
                  <div class="mb-4">
                    <label class="form-label" for="signup-name">Añade una <i>thumbnail</i></label>
                    <input class="form-control" type="file" name="new_thumbnail" id="signup-name" placeholder="Escribe aquí el título " required>
                  </div>
                </div>

                <div class="col-5 col-md-4">
                  <label class="form-label" for="signup-name">Tiempo de lectura</label>
                  <div class="mb-4 input-group">
                    <input class="form-control" type="number" name="new_read_time" placeholder="10" required>
                    <span class="input-group-text">minutos</span>
                  </div>
                </div>

                <div class="col-6 col-md-5">
                  <div class="mb-4">
                    <label class="form-label" for="signup-name">Nombre de la noticia</label>
                    <input class="form-control" type="text" name="new_name" id="signup-name" placeholder="Escribe aquí el título " required>
                  </div>
                </div>
                <div class="col-6 col-md-3">
                  <div class="mb-4">
                    <label class="form-label" for="signup-name">Sección <a href="{{url_for('panel.index')}}" target="_blank"><i class="bx bx-link-external"></i></a></label>
                    <select class="form-select" name="new_section" required>
                      <option value="">Elige...</option>
                      {% for i in categories %}
                      <option value="{{i}}">{{i}}</option>
                      {% endfor %}
                    </select>                                 
                  </div>
                </div>
                <div class="col-6 col-md-4">
                  <div class="mb-4">
                    <label class="form-label" for="tagsLabel">Tags</label>
                    <input list="tagsList" class="form-control" id="new_tags" name="new_tags">

                    <datalist id="tagsList">
                        <option value="Chocolate">
                        <option value="Coconut">
                        <option value="Mint">
                        <option value="Strawberry">
                        <option value="Vanilla">
                    </datalist>                    
                  </div>
                </div>
                
                <div class="col-12 col-md-6">
                  <div class="mb-4">
                    <label class="form-label" for="signup-name">Descripción corta</label>
                    <textarea list="tagsList" class="form-control" rows=5 name="new_short_description"></textarea>               
                           
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="mb-4">
                    <label class="form-label" for="signup-name">Apartado no descrito..</label>
                    <select class="form-select" name="new_no2" disabled>
                      <option value="">Elige...</option>
                    </select>                              
                  </div>
                  <div class="mb-4">
                    <label class="form-label" for="signup-name">Apartado no descrito..</label>
                    <select class="form-select" name="new_no1" disabled>
                      <option value="">Elige...</option>
                    </select>                              
                  </div>
                </div>
            </div>

            <!-- Include stylesheet -->
            <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

            <!-- Create the editor container -->
            <label class="form-label" for="signup-name">Escribe aquí la noticia</label>
            <div id="editor" class="mb-3">
            <p>¡Hola equipo de Weggo!</p>
            <p>Recuerda que la noticia no se guarda si se cancela el proceso. Sugerimos crear la noticia en un documento y pasarla aquí <strong>sólo para estructurarla</strong> a la hora de publicarla.</p>
            <p><br></p>
            </div>

            <textarea name="new_description" style="display:none" id="hiddenArea"></textarea>

            <!-- Include the Quill library -->
            <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

            <!-- Initialize Quill editor -->
            <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
            <script>
                var toolbarOptions = [
                ['bold', 'italic', 'underline', 'strike', 'image'],        // toggled buttons
                ['blockquote', 'code-block'],

                [{ 'header': 1 }, { 'header': 2 }],               // custom button values
                [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript
                [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent
                [{ 'direction': 'rtl' }],                         // text direction

                [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown
                [{ 'header': [1, 2, 3, 4, 5, 6, false] }],

                [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme
                [{ 'font': [] }],
                [{ 'align': [] }],

                ['clean']                                         // remove formatting button
                ];

                var quill = new Quill('#editor', {
                modules: {
                    toolbar: toolbarOptions
                },
                theme: 'snow'
                });
 
                $("#newForm").on("submit",function(){
                  $("#hiddenArea").val($(".ql-editor").html());
                })
            </script>
            
            <div class="row">
                <div class="col-md-2"></div>
                <button type="submit" class="col-md-8 btn btn-primary">Crear noticia</button>
                <div class="col-md-2"></div>
            </div>
        </form>
    </div>
</section>
{% endblock %}

{% block scripts %}
{% endblock %}